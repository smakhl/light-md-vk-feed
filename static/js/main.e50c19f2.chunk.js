(this["webpackJsonplight-md-vk-feed"]=this["webpackJsonplight-md-vk-feed"]||[]).push([[0],{70:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(18),o=n.n(r),s=(n(70),n(16)),i=n.n(s),l=n(24),u=n(21),d=n(123),j=n(122),p=n(39),h=n(58),b=Object(h.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:p.a.A400},background:{default:"#f5f5f5"}}}),f=n(44),x=n(124);function m(){return new Promise((function(e,t){VK.Api.call("newsfeed.get",{v:"5.130",count:100,filters:"post",source_ids:"groups,pages",max_photos:100},(function(n){var c=n.response;if(c){var a=Object(x.a)(c.groups,"id"),r=c.items.map((function(e){return function(e,t){return Object(f.a)(Object(f.a)({},e),{},{dateRaw:e.date,date:O(e.date),source_name:t[-e.source_id].name,avatar_src:t[-e.source_id].photo_50,url:v(e)})}(e,a)})).reverse();console.log("\ud83d\ude80 ~ returnnewPromise ~ posts",r),e(r)}else t(n)}))}))}function O(e){return new Date(1e3*e)}function v(e){return"https://vk.com/wall".concat(e.source_id,"_").concat(e.post_id)}VK.init({apiId:7412293});var g=n(126),w=n(120),y=n(112),k=n(55),_=n.n(k),S=n(125),z=n(116),N=n(117),P=n(128),C=n(118),I=n(29),K=n(119),L=n(113),V=n(114),A=n(115),T=n(95),F=n(43),W=n.n(F),B=n(57),E=n.n(B),D=n(3);function J(e){var t=e.sizes,n=e.className;return Object(D.jsx)("img",{srcSet:t.map((function(e){var t;return"".concat(null!==(t=e.url)&&void 0!==t?t:e.src," ").concat(e.width,"w")})).join(","),className:n,alt:""})}var G=Object(y.a)({photo:{width:"100%"},linkPhoto:{flex:"1 1 0",minWidth:0,maxWidth:"40%"},icon:{color:"rgba(255, 255, 255, 0.54)"}});function H(e){var t=G(),n=e.attachment;return"photo"===n.type?Object(D.jsx)("div",{children:Object(D.jsx)(J,{className:t.photo,sizes:n.photo.sizes})}):"video"===n.type?Object(D.jsxs)(L.a,{component:"div",children:[Object(D.jsx)(J,{className:t.photo,sizes:n.video.image}),Object(D.jsx)(V.a,{title:n.video.title,subtitle:n.video.description})]},n.video.id):"link"===n.type?Object(D.jsx)(A.a,{href:n.link.url,target:"_blank",rel:"noopener noreferrer",children:Object(D.jsxs)(T.a,{style:{display:"flex",minHeight:"80px",margin:8},variant:"outlined",children:[n.link.photo?Object(D.jsx)(J,{className:t.linkPhoto,sizes:n.link.photo.sizes}):Object(D.jsx)("div",{style:{display:"flex",width:"80px",justifyContent:"center",alignItems:"center"},children:Object(D.jsx)(W.a,{})}),Object(D.jsx)("div",{style:{padding:8,display:"flex",alignItems:"center",flex:"1 1 0",minWidth:0},children:Object(D.jsxs)(I.a,{variant:"body2",lang:"ru",children:[n.link.title," ",Object(D.jsx)(W.a,{fontSize:"inherit"})]})})]})}):"doc"===n.type&&"gif"===n.doc.ext?Object(D.jsx)(M,{attachment:n}):Object(D.jsx)(I.a,{variant:"body2",lang:"ru",className:t.photo,children:"Unsupported attachment: ".concat(n.type)})}function M(e){var t,n,a,r,o=G(),s=e.attachment,i=Object(c.useState)(!1),l=Object(u.a)(i,2),d=l[0],j=l[1],p=null===(t=s.doc.preview)||void 0===t||null===(n=t.video)||void 0===n?void 0:n.src,h=null===(a=s.doc.preview)||void 0===a||null===(r=a.photo)||void 0===r?void 0:r.sizes;return p&&h?Object(D.jsx)("div",{children:d?Object(D.jsx)("video",{src:p,autoPlay:!0,controls:!0,className:o.photo}):Object(D.jsxs)("div",{style:{position:"relative"},onClick:function(){return j(!0)},children:[Object(D.jsx)(E.a,{style:{color:"white",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100px",height:"100px"}}),Object(D.jsx)(J,{className:o.photo,sizes:h})]})}):null}var R=Object(y.a)({postText:{wordBreak:"break-word",whiteSpace:"pre-wrap"}});function U(e){var t,n=e.post,c=R(),a=null===(t=n.attachments)||void 0===t?void 0:t.map((function(e,t){return Object(D.jsx)(H,{attachment:e},t)}));return Object(D.jsx)(S.a,{my:4,children:Object(D.jsxs)(z.a,{onClick:function(){console.log(n)},children:[Object(D.jsx)(N.a,{title:n.source_name,subheader:n.date.toLocaleString("ru"),avatar:Object(D.jsx)(P.a,{src:n.avatar_src,children:"\ud83d\ude0a"})}),a,Object(D.jsx)(C.a,{children:Object(D.jsx)(I.a,{variant:"body1",color:"textPrimary",component:"p",lang:"ru",className:c.postText,children:Object(D.jsx)(_.a,{children:n.text})})}),Object(D.jsxs)(K.a,{children:[Object(D.jsx)(g.a,{href:n.url,target:"_blank",size:"small",color:"primary",children:"Open in VK"}),Object(D.jsx)(g.a,{size:"small",color:"primary",children:"Share"})]})]})})}var q=n(121);function Q(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(D.jsxs)(w.a,{maxWidth:"sm",children:[0===n.length&&Object(D.jsx)(q.a,{}),n.map((function(e){return Object(D.jsx)(U,{post:e},e.post_id)}))]})}function X(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,new Promise((function(e,t){var n=setTimeout((function(){e(!1)}),2e3);VK.Auth.getLoginStatus((function(t){console.log("\ud83d\ude80 ~ VK.Auth.getLoginStatus ~ response",t);var c=t.status;clearTimeout(n),e("connected"===c)}))}));case 3:e.t1=e.sent,(0,e.t0)(e.t1),console.log("\ud83d\ude80 ~ isLoggedIn",n);case 6:case"end":return e.stop()}}),e)})))()}),[n]),Object(D.jsxs)(j.a,{theme:b,children:[Object(D.jsx)(d.a,{}),null===n&&Object(D.jsx)(q.a,{}),!1===n&&Object(D.jsx)(g.a,{variant:"contained",onClick:Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){VK.Auth.login((function(n){console.log("\ud83d\ude80 ~ VK.Auth.login ~ result",n),"connected"===n.status?e(n):t(n)}),8194)}));case 2:a(!0);case 3:case"end":return e.stop()}}),e)}))),children:"LOG IN"}),!0===n&&Object(D.jsx)(Q,{})]})}var Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,129)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};o.a.render(Object(D.jsx)(a.a.StrictMode,{children:Object(D.jsx)(X,{})}),document.getElementById("root")),Y()}},[[91,1,2]]]);
//# sourceMappingURL=main.e50c19f2.chunk.js.map